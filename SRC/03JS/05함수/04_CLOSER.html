<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 클로저
      // 클로저는 내부 함수가 외부 함수의 변수에 접근할 수 있는 것을 의미
      // 정보 은닉(Information Hiding) : 클로저를 사용하여 외부에서 접근할 수 없도록 변수를 보호하고,
      // 함수를 통해서만 접근 가능하도록 만들 수 있습니다.

      // 데이터 보존(Data Persistence) : 클로저를 사용하여 함수가 생성될 당시의 환경을 유지하면서,
      // 데이터를 영구적으로 보존할 수 있습니다.
      // 비동기 처리(Asynchronous Operations) : 클로저를 사용하여 비동기적인 작업에서 겨로가를 유지하고,
      // 필요에 따라 접근할수 있도록 할 수  있습니다.

      //01

      // function outer() {
      //   // 상태값 보관
      //   let state = 0;
      //   // 내부 함수
      //   function addOne() {
      //     state++;
      //     console.log("state..", state); //렉시컬 스코프 적용
      //   }
      //   return addOne; // 함수이름이 리턴되면 만들어진 함수의 위치정보(함수의 메모리주소)가 반환
      // }

      // const closureFunc = outer();
      // console.log("clousureFunc", closureFunc);
      // closureFunc();
      // closureFunc();
      // closureFunc();
      // closureFunc();

      // 전역 스코프
      var x = "global x";
      console.log("window", window.x);

      // outer 함수 지역 스코프
      function outer() {
        var x = "outer x";
        var n1 = 10;
        var y = 0;

        // inner 함수 지역 스코프
        function inner() {
          var x = "inner x";

          // if 블록 지역 스코프
          if (x) {
            const x = "if block scope";
            console.log(x); // if block scope
            y++;
            console.log("y", y); // outer y
            n1++;
            console.log("n1", n1);
            // console.log(z); // Uncaught ReferenceError: z is not defined
          }
          console.dir(inner);
        }

        return inner;
      }

      console.log("------------------------------------");
      const clousureFunc2 = outer(); // outer()는 내부에서 inner 함수를 반환한다.
      clousureFunc2(); // 이게 가능한 이유는 outer()의 반환값은 단순한 값이 아니라 함수이기 때문에 closureFunc2()를 호출하면 실제로 inner 함수가 실행되는 것이다.
    </script>
  </body>
</html>
